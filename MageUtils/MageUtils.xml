<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Script file="MageUtils.lua" />
    <Frame name="MageUtils">
        <Scripts>
            <OnLoad> 
                MU_Start(self)	
            </OnLoad>
            </Scripts>
    </Frame>

    <Frame name="MageUtilsAlliFrame" parent="UIParent" hidden="true" enableMouse="true" movable="true">
        <Size x="225" y="120" />
        <Anchors>
            <Anchor point="TOPRIGHT">
                <Offset>
                    <AbsDimension x="-200" y="-70"/>
                </Offset>
            </Anchor>
        </Anchors>
        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface/Tooltips/UI-Tooltip-Border" tile="true">
        <TileSize>
            <AbsValue val="32"/>
        </TileSize>
        <EdgeSize>
            <AbsValue val="13"/>
        </EdgeSize>
        <BackgroundInsets>
            <AbsInset left="2" right="2" top="2" bottom="2"/>
        </BackgroundInsets>
        </Backdrop>
        <Layers>
            <Layer level="ARTWORK">
                <FontString name="$parentText" font="Fonts\FRIZQT__.TTF" inherits="GameFontNormal" text="Portals">
                    <Anchors>
                        <Anchor point="TOP">
                            <Offset>
                            <AbsDimension x="0" y="-5"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                    <FontHeight>
                    <AbsValue val="11"/>
                    </FontHeight>
                </FontString>
                <FontString name="$parentText2" font="Fonts\FRIZQT__.TTF" inherits="GameFontNormal" text="Teleport">
                    <Anchors>
                        <Anchor point="TOP">
                            <Offset>
                            <AbsDimension x="0" y="-45"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                    <FontHeight>
                    <AbsValue val="11"/>
                    </FontHeight>
                </FontString>
            </Layer>
        </Layers>
        <Frames>
        <Button name="$parentPortDal" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="10" y="-20"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_PortalDalaran"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "spell")
                    this:SetAttribute("spell", GetSpellInfo(53142))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Portal:Dalaran")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button>  
        <Button name="$parentPortShat" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="40" y="-20"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_PortalShattrath"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "spell")
                    this:SetAttribute("spell", GetSpellInfo(33691))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Portal:Shattrath")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button>  
        <Button name="$parentPortIF" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="70" y="-20"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_PortalIronforge"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "spell")
                    this:SetAttribute("spell", GetSpellInfo(11416))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Portal:Ironforge")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button> 
        <Button name="$parentPortSW" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="100" y="-20"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_PortalStormwind"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    local swport = GetSpellInfo(10059);
                    if (swport == nil) then
                    
                    else
                        this:SetAttribute("type1", "spell")
                        this:SetAttribute("spell", GetSpellInfo(10059))
                    end
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Portal:Stormwind")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button> 
        <Button name="$parentPortDarn" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="130" y="-20"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_PortalDarnassus"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "spell")
                    this:SetAttribute("spell", GetSpellInfo(11419))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Portal:Darnassus")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button> 
        <Button name="$parentPortExo" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="160" y="-20"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_PortalExodar"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "spell")
                    this:SetAttribute("spell", GetSpellInfo(32266))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Portal:Exodar")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button> 
        <Button name="$parentPortTheramore" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="190" y="-20"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_PortalTheramore"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "spell")
                    this:SetAttribute("spell", GetSpellInfo(49360))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Portal:Theramore")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button> 
        
        <Button name="$parentTeleDal" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="10" y="-60"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_TeleportDalaran"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "spell")
                    this:SetAttribute("spell", GetSpellInfo(53140))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Teleport:Dalaran")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button>
        <Button name="$parentTeleShat" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="40" y="-60"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_TeleportShattrath"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "spell")
                    this:SetAttribute("spell", GetSpellInfo(33690))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Teleport:Shattrath")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button>
        <Button name="$parentTeleIF" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="70" y="-60"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_TeleportIronforge"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "spell")
                    this:SetAttribute("spell", GetSpellInfo(3562))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Teleport:Ironforge")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button>    
        <Button name="$parentTeleSW" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="100" y="-60"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_TeleportStormwind"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "spell")
                    this:SetAttribute("spell", GetSpellInfo(3561))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Teleport:Stormwind")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button>     
        <Button name="$parentTeleDarn" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="130" y="-60"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_TeleportDarnassus"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "spell")
                    this:SetAttribute("spell", GetSpellInfo(3565))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Teleport:Darnassus")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button>   
        <Button name="$parentTeleExo" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="160" y="-60"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_TeleportExodar"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "spell")
                    this:SetAttribute("spell", GetSpellInfo(32271))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Teleport:Exodar")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button>   
        <Button name="$parentTeleTheramore" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="25" y="25"/>
            </Size>
            <Anchors>
                <Anchor point="TOPLEFT">
                    <Offset>
                        <AbsDimension x="190" y="-60"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\Spell_Arcane_TeleportTheramore"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "spell")
                    this:SetAttribute("spell", GetSpellInfo(49359))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Teleport:Theramore")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button> 
            
        <Button name="$parentHearth" inherits="SecureActionButtonTemplate">
            <Size>
                <AbsDimension x="20" y="20"/>
            </Size>
            <Anchors>
                <Anchor point="BOTTOM">
                    <Offset>
                        <AbsDimension x="-70" y="10"/>
                    </Offset>
                </Anchor>
            </Anchors>
            <Layers>
                <Layer level="BACKGROUND">
                    <Texture name="$parentTelDalTexture" file="Interface\Icons\inv_misc_rune_01"/>
                </Layer>
            </Layers>
            <Scripts>
                <OnLoad>
                    this:SetAttribute("type1", "item")
                    this:SetAttribute("item", GetItemInfo(6948))
                </OnLoad>
                <OnEnter>
                    GameTooltip:SetOwner(this, ANCHOR_TOPLEFT);
                    GameTooltip:AddLine("Hearthstone")
                    GameTooltip:Show()
                </OnEnter>
                <OnLeave>
                    GameTooltip:Hide()
                </OnLeave>
            </Scripts>
        </Button>     
        
        <Button name="$parentClose" inherits="OptionsButtonTemplate" text="Close">
                <Size>
                <AbsDimension x="60" y="18"/>
                </Size>
                <Anchors>
                    <Anchor point="BOTTOM">
                        <Offset>
                        <AbsDimension x="-20" y="10"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        MageUtilsAlliFrame:Hide();
                    </OnClick>
                </Scripts>
        </Button>
        <Button name="$parentShowOptions" inherits="OptionsButtonTemplate" text="Options">
                <Size>
                <AbsDimension x="60" y="18"/>
                </Size>
                <Anchors>
                    <Anchor point="BOTTOM">
                        <Offset>
                        <AbsDimension x="50" y="10"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        MageUtilsAlliFrame:Hide();
                    </OnClick>
                </Scripts>
        </Button>    
        </Frames>
        <Scripts>
            <OnShow>
                local runeofPort = GetItemCount(17032)
                local runeofTele = GetItemCount(17031)
                MageUtilsAlliFrameText:SetText("Portal:"..runeofPort)
                MageUtilsAlliFrameText2:SetText("Teleport:"..runeofTele)
            </OnShow>
        </Scripts>
    </Frame>
</Ui>